###############################################################################
#
# IAR C/C++ Compiler V10.30.1.6000 for 8051               20/Oct/2019  21:43:15
# Copyright 2004-2018 IAR Systems AB.
# PC-locked license - IAR Embedded Workbench for 8051
#
#    Core               =  plain
#    Code model         =  banked
#    Data model         =  large
#    Calling convention =  xdata reentrant
#    Constant location  =  data_rom
#    Dptr setup         =  1,16
#                          
#    Source file        =  
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Components\stack\sys\ZGlobals.c
#    Command line       =  
#        -f C:\Users\hhhho\AppData\Local\Temp\EWBFB9.tmp
#        (C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Components\stack\sys\ZGlobals.c
#        -D ZTOOL_P1 -D SECURE=1 -D xNV_INIT -D xNV_RESTORE -D
#        LCD_SUPPORTED=FALSE -D MULTICAST_ENABLED=FALSE -D FEATURE_SYSTEM_STATS
#        -lC
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\CoordinatorEB\List
#        -lA
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\CoordinatorEB\List
#        --diag_suppress Pe001,Pa010 -o
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\CoordinatorEB\Obj
#        -e --debug --core=plain --dptr=16,1 --data_model=large
#        --code_model=banked --calling_convention=xdata_reentrant
#        --place_constants=data_rom --nr_virtual_regs 16 -f
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wCoord.cfg
#        (-DCPU32MHZ -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRUE
#        -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8 -DMAC_CFG_RX_MAX=5
#        -DZDO_COORDINATOR -DRTR_NWK) -f
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg
#        (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR
#        -DDEFAULT_CHANLIST=0x00000800 -DZDAPP_CONFIG_PAN_ID=0xFFFF
#        -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MASK=0x007F
#        -DBEACON_REQUEST_DELAY=100 -DBEACON_REQ_DELAY_MASK=0x00FF
#        -DLINK_STATUS_JITTER_MASK=0x007F -DROUTE_EXPIRY_TIME=30
#        -DAPSC_ACK_WAIT_DURATION_POLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7
#        -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3
#        -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9
#        -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4
#        -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07,
#        0x09, 0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C,
#        0x0D}" -DMAC_MAX_FRAME_SIZE=116 -DZDNWKMGR_MIN_TRANSMISSIONS=20
#        "-DCONST=const __code" -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE
#        -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100
#        -DREJOIN_POLL_RATE=440 -DREJOIN_BACKOFF=900000 -DREJOIN_SCAN=900000)
#        -f
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wZCL.cfg
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\Source\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\Source\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\ZMain\TI2530DB\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\hal\include\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\mac\include\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\mac\high_level\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\single_chip\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\mt\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\osal\include\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\services\saddr\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\services\sdata\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\af\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\nwk\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\sapi\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\sec\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\sys\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\zcl\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\zdo\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\zmac\
#        -I
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\..\..\..\..\..\Components\zmac\f8w\
#        -Ohz --require_prototypes)
#    Locale             =  Chinese (Simplified)_CHN.936
#    List file          =  
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\CoordinatorEB\List\ZGlobals.lst
#    Object file        =  
#        C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Projects\zstack\Prj\SampleApp\CC2530DB\CoordinatorEB\Obj\ZGlobals.r51
#
###############################################################################

C:\Users\hhhho\Desktop\Z-Stack1.2.2a-spp-v001\Z-Stack1.2.2a-spp-v001\Components\stack\sys\ZGlobals.c
      1          /**************************************************************************************************
      2            Filename:       ZGlobals.c
      3            Revised:        $Date: 2015-10-05 14:56:09 -0700 (Mon, 05 Oct 2015) $
      4            Revision:       $Revision: 44517 $
      5          
      6            Description:    User definable Z-Stack parameters.
      7          
      8          
      9            Copyright 2007-2015 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product. Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41           * INCLUDES
     42           */
     43          
     44          #include "ZComDef.h"
     45          #include "OSAL_Nv.h"
     46          #include "ZDObject.h"
     47          #include "ZGlobals.h"
     48          #include "ZDNwkMgr.h"
     49          #include "OnBoard.h"
     50          #include "ZDSecMgr.h"
     51          
     52          /*********************************************************************
     53           * MACROS
     54           */
     55          
     56          /*********************************************************************
     57           * CONSTANTS
     58           */
     59          
     60          /*********************************************************************
     61           * TYPEDEFS
     62           */
     63          
     64          typedef struct zgItem
     65          {
     66            uint16 id;
     67            uint16 len;
     68            void *buf;
     69          } zgItem_t;
     70          
     71          /*********************************************************************
     72           * NWK GLOBAL VARIABLES
     73           */
     74          
     75          // Polling values

   \                                 In  segment XDATA_I, align 1, keep-with-next
     76          uint32 zgPollRate = POLL_RATE;
   \                     zgPollRate:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for zgPollRate>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
     77          uint16 zgQueuedPollRate = QUEUED_POLL_RATE;
   \                     zgQueuedPollRate:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgQueuedPollRate>`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
     78          uint16 zgResponsePollRate = RESPONSE_POLL_RATE;
   \                     zgResponsePollRate:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgResponsePollRate>`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
     79          uint16 zgRejoinPollRate = REJOIN_POLL_RATE;
   \                     zgRejoinPollRate:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgRejoinPollRate>`
   \   000002                REQUIRE __INIT_XDATA_I
     80          
     81          // Rejoin backoff (silent period ) duration

   \                                 In  segment XDATA_I, align 1, keep-with-next
     82          uint32 zgDefaultRejoinBackoff = REJOIN_BACKOFF;
   \                     zgDefaultRejoinBackoff:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for zgDefaultRejoinBackoff>`
   \   000004                REQUIRE __INIT_XDATA_I
     83          
     84          // Rejoin scan duration

   \                                 In  segment XDATA_I, align 1, keep-with-next
     85          uint32 zgDefaultRejoinScan = REJOIN_SCAN ;
   \                     zgDefaultRejoinScan:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for zgDefaultRejoinScan>`
   \   000004                REQUIRE __INIT_XDATA_I
     86          
     87          // Transmission retries numbers

   \                                 In  segment XDATA_I, align 1, keep-with-next
     88          uint8 zgMaxDataRetries = NWK_MAX_DATA_RETRIES;
   \                     zgMaxDataRetries:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgMaxDataRetries>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
     89          uint8 zgMaxPollFailureRetries = MAX_POLL_FAILURE_RETRIES;
   \                     zgMaxPollFailureRetries:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgMaxPollFailureRetries>`
   \   000001                REQUIRE __INIT_XDATA_I
     90          
     91          // Default channel list

   \                                 In  segment XDATA_I, align 1, keep-with-next
     92          uint32 zgDefaultChannelList = DEFAULT_CHANLIST;
   \                     zgDefaultChannelList:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for zgDefaultChannelList>`
   \   000004                REQUIRE __INIT_XDATA_I
     93          
     94          // Default starting scan duration

   \                                 In  segment XDATA_I, align 1, keep-with-next
     95          uint8 zgDefaultStartingScanDuration = STARTING_SCAN_DURATION;
   \                     zgDefaultStartingScanDuration:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgDefaultStartingScanDuratio`
   \   000001                REQUIRE __INIT_XDATA_I
     96          
     97          // Stack profile Id

   \                                 In  segment XDATA_I, align 1, keep-with-next
     98          uint8 zgStackProfile = STACK_PROFILE_ID;
   \                     zgStackProfile:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgStackProfile>`
   \   000001                REQUIRE __INIT_XDATA_I
     99          
    100          // Default indirect message holding timeout

   \                                 In  segment XDATA_I, align 1, keep-with-next
    101          uint8 zgIndirectMsgTimeout = NWK_INDIRECT_MSG_TIMEOUT;
   \                     zgIndirectMsgTimeout:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgIndirectMsgTimeout>`
   \   000001                REQUIRE __INIT_XDATA_I
    102          
    103          // Security mode

   \                                 In  segment XDATA_I, align 1, keep-with-next
    104          uint8 zgSecurityMode = ZG_SECURITY_MODE;
   \                     zgSecurityMode:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgSecurityMode>`
   \   000001                REQUIRE __INIT_XDATA_I
    105          
    106          // Secure permit join

   \                                 In  segment XDATA_I, align 1, keep-with-next
    107          uint8 zgSecurePermitJoin = TRUE;
   \                     zgSecurePermitJoin:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgSecurePermitJoin>`
   \   000001                REQUIRE __INIT_XDATA_I
    108          
    109          // Trust center address

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    110          uint8 zgApsTrustCenterAddr[Z_EXTADDR_LEN] = { 0 };
   \                     zgApsTrustCenterAddr:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z
    111          
    112          // Route Discovery Time - amount of time that a route request lasts

   \                                 In  segment XDATA_I, align 1, keep-with-next
    113          uint8 zgRouteDiscoveryTime = ROUTE_DISCOVERY_TIME;
   \                     zgRouteDiscoveryTime:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgRouteDiscoveryTime>`
   \   000001                REQUIRE __INIT_XDATA_I
    114          
    115          // Route expiry

   \                                 In  segment XDATA_I, align 1, keep-with-next
    116          uint8 zgRouteExpiryTime = ROUTE_EXPIRY_TIME;
   \                     zgRouteExpiryTime:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgRouteExpiryTime>`
   \   000001                REQUIRE __INIT_XDATA_I
    117          
    118          // Extended PAN Id

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    119          uint8 zgExtendedPANID[Z_EXTADDR_LEN];
   \                     zgExtendedPANID:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z
    120          
    121          // Broadcast parameters

   \                                 In  segment XDATA_I, align 1, keep-with-next
    122          uint8 zgMaxBcastRetires   = MAX_BCAST_RETRIES;
   \                     zgMaxBcastRetires:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgMaxBcastRetires>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    123          uint8 zgPassiveAckTimeout = PASSIVE_ACK_TIMEOUT;
   \                     zgPassiveAckTimeout:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgPassiveAckTimeout>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    124          uint8 zgBcastDeliveryTime = BCAST_DELIVERY_TIME;
   \                     zgBcastDeliveryTime:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgBcastDeliveryTime>`
   \   000001                REQUIRE __INIT_XDATA_I
    125          
    126          // Network mode

   \                                 In  segment XDATA_I, align 1, keep-with-next
    127          uint8 zgNwkMode = NWK_MODE;
   \                     zgNwkMode:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkMode>`
   \   000001                REQUIRE __INIT_XDATA_I
    128          
    129          // Many-to-one values

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    130          uint8 zgConcentratorEnable = CONCENTRATOR_ENABLE;
   \                     zgConcentratorEnable:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    131          uint8 zgConcentratorDiscoveryTime = CONCENTRATOR_DISCOVERY_TIME;
   \                     zgConcentratorDiscoveryTime:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_I, align 1, keep-with-next
    132          uint8 zgConcentratorRadius = CONCENTRATOR_RADIUS;
   \                     zgConcentratorRadius:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgConcentratorRadius>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    133          uint8 zgConcentratorRC = CONCENTRATOR_ROUTE_CACHE;   // concentrator with route cache (no memory constraints)
   \                     zgConcentratorRC:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_I, align 1, keep-with-next
    134          uint8 zgNwkSrcRtgExpiryTime = SRC_RTG_EXPIRY_TIME;
   \                     zgNwkSrcRtgExpiryTime:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkSrcRtgExpiryTime>`
   \   000001                REQUIRE __INIT_XDATA_I
    135          
    136          // Cleanup Child Table according to routing traffic

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    137          uint8 zgRouterOffAssocCleanup = FALSE;
   \                     zgRouterOffAssocCleanup:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    138          
    139          // Determines whether or not a remote NWK leave request command frame received
    140          // by the local device is accepted .

   \                                 In  segment XDATA_I, align 1, keep-with-next
    141          uint8 zgNwkLeaveRequestAllowed = TRUE;
   \                     zgNwkLeaveRequestAllowed:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkLeaveRequestAllowed>`
   \   000001                REQUIRE __INIT_XDATA_I
    142          
    143          //=======    Child Aging PARENT ROUTER (ZR/ZC) configuration   ========
    144          // You can setup a router to support Child Table Aging in 1 of 2 modes of
    145          // operation.  The first mode is NWK_PARENT_INFO_ORPHAN_NOTIFICATION and it
    146          // expects end devices to use orphan scan periodically as a means of a keep-alive
    147          // notification to the parent.  The other mode is NWK_PARENT_INFO_MAC_DATA_POLL
    148          // which uses the end device's MAC POLL request as the keep-alive notification.
    149          // The first method is preferred for new devices, where the end devices provide
    150          // support for it (which will be manditory in future Zigbee Home Automation
    151          // Specifications).
    152          // The second method is compatible with older end devices without the need for
    153          // specific child aging support.
    154          //
    155          // The method supported by the router (or coordinator) is determined at build time
    156          // by setting zgNwkParentInformation to either NWK_PARENT_INFO_ORPHAN_NOTIFICATION
    157          // or NWK_PARENT_INFO_MAC_DATA_POLL.
    158          //
    159          // End device built with Child Table Aging support both methods, the method is
    160          // determined by the parent and communicated at run-time.
    161          #if ( ZG_BUILD_ENDDEVICE_TYPE )
    162          uint8 zgNwkParentInformation = NWK_PARENT_INFO_UNDEFINED;
    163          #else

   \                                 In  segment XDATA_I, align 1, keep-with-next
    164          uint8 zgNwkParentInformation = NWK_PARENT_INFO_ORPHAN_NOTIFICATION;
   \                     zgNwkParentInformation:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkParentInformation>`
   \   000001                REQUIRE __INIT_XDATA_I
    165          #endif
    166          
    167          // This is an index into table Requested Timeout Enumerated Values.
    168          // It is used by the parent router, it indicates the default timeout value
    169          // for any end device that does not negotiate a different timeout value

   \                                 In  segment XDATA_I, align 1, keep-with-next
    170          uint8 zgNwkEndDeviceTimeoutDefault = NWK_END_DEV_TIMEOUT_DEFAULT;
   \                     zgNwkEndDeviceTimeoutDefault:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkEndDeviceTimeoutDefault`
   \   000001                REQUIRE __INIT_XDATA_I
    171          //=====================================================================
    172          
    173          //==========    Child Aging END DEVICE configuration    ===============
    174          // Values used by End Device when sending End Device Timeout Request

   \                                 In  segment XDATA_I, align 1, keep-with-next
    175          uint8 zgEndDeviceTimeoutValue  = END_DEV_TIMEOUT_VALUE;
   \                     zgEndDeviceTimeoutValue:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgEndDeviceTimeoutValue>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    176          uint8 zgEndDeviceConfiguration = END_DEV_CONFIGURATION;
   \                     zgEndDeviceConfiguration:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    177          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    178          uint32 zgEndDeviceKAInterval = 0;
   \                     zgEndDeviceKAInterval:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
    179          //=====================================================================
    180          
    181          // Determines if the Child Aging Table Management process is active or not.
    182          // This feature is optional and it is disabled by default.
    183          //
    184          // NOTICE:  Before enabling Child Aging make sure to review all the related
    185          // definitions in this file, especially zgNwkParentInformation.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    186          uint8 zgChildAgingEnable = FALSE;
   \                     zgChildAgingEnable:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    187          
    188          /*********************************************************************
    189           * APS GLOBAL VARIABLES
    190           */
    191          
    192          // The maximum number of retries allowed after a transmission failure

   \                                 In  segment XDATA_I, align 1, keep-with-next
    193          uint8 zgApscMaxFrameRetries = APSC_MAX_FRAME_RETRIES;
   \                     zgApscMaxFrameRetries:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgApscMaxFrameRetries>`
   \   000001                REQUIRE __INIT_XDATA_I
    194          
    195          // The maximum number of seconds (milliseconds) to wait for an
    196          // acknowledgement to a transmitted frame.
    197          
    198          // This number is used by polled devices.

   \                                 In  segment XDATA_I, align 1, keep-with-next
    199          uint16 zgApscAckWaitDurationPolled = APSC_ACK_WAIT_DURATION_POLLED;
   \                     zgApscAckWaitDurationPolled:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgApscAckWaitDurationPolled>`
   \   000002                REQUIRE __INIT_XDATA_I
    200          
    201          // This number is used by non-polled devices in the following formula:
    202          //   (100 mSec) * (_NIB.MaxDepth * zgApsAckWaitMultiplier)

   \                                 In  segment XDATA_I, align 1, keep-with-next
    203          uint8 zgApsAckWaitMultiplier = 2;
   \                     zgApsAckWaitMultiplier:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgApsAckWaitMultiplier>`
   \   000001                REQUIRE __INIT_XDATA_I
    204          
    205          // The maximum number of milliseconds for the end device binding

   \                                 In  segment XDATA_I, align 1, keep-with-next
    206          uint16 zgApsDefaultMaxBindingTime = APS_DEFAULT_MAXBINDING_TIME;
   \                     zgApsDefaultMaxBindingTime:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgApsDefaultMaxBindingTime>`
   \   000002                REQUIRE __INIT_XDATA_I
    207          
    208          // The 64-big identifier of the network to join or form.
    209          // Default set to all zeros

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    210          uint8 zgApsUseExtendedPANID[Z_EXTADDR_LEN] = {00,00,00,00,00,00,00,00};
   \                     zgApsUseExtendedPANID:
   \   000000                DS 8
   \   000008                REQUIRE __INIT_XDATA_Z
    211          
    212          // A boolean flag that indicates whether it is OK to use insecure join
    213          // on startup. Default set to TRUE

   \                                 In  segment XDATA_I, align 1, keep-with-next
    214          uint8 zgApsUseInsecureJoin = TRUE;
   \                     zgApsUseInsecureJoin:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgApsUseInsecureJoin>`
   \   000001                REQUIRE __INIT_XDATA_I
    215          
    216          // The radius of broadcast multicast transmissions

   \                                 In  segment XDATA_I, align 1, keep-with-next
    217          uint8 zgApsNonMemberRadius = APS_DEFAULT_NONMEMBER_RADIUS;
   \                     zgApsNonMemberRadius:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgApsNonMemberRadius>`
   \   000001                REQUIRE __INIT_XDATA_I
    218          
    219          // Commissioned Network Address

   \                                 In  segment XDATA_I, align 1, keep-with-next
    220          uint16 zgNwkCommissionedNwkAddr = INVALID_NODE_ADDR;
   \                     zgNwkCommissionedNwkAddr:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgNwkCommissionedNwkAddr>`
   \   000002                REQUIRE __INIT_XDATA_I
    221          
    222          // APS Duplication Rejection table variables

   \                                 In  segment XDATA_I, align 1, keep-with-next
    223          uint16 zgApscDupRejTimeoutInc = DEFAULT_APS_DUP_REJ_TIMEOUT_INCREMENT;
   \                     zgApscDupRejTimeoutInc:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgApscDupRejTimeoutInc>`
   \   000002                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    224          uint8  zgApscDupRejTimeoutCount = DEFAULT_APS_DUP_REJ_TIMEOUT;
   \                     zgApscDupRejTimeoutCount:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgApscDupRejTimeoutCount>`
   \   000001                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_I, align 1, keep-with-next
    225          uint16 zgApsMinDupRejTableSize = APS_DUP_REJ_ENTRIES;
   \                     zgApsMinDupRejTableSize:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgApsMinDupRejTableSize>`
   \   000002                REQUIRE __INIT_XDATA_I
    226          
    227          
    228          
    229          /*********************************************************************
    230           * SECURITY GLOBAL VARIABLES
    231           */
    232          
    233          // If TRUE, preConfigKey should be configured on all devices on the network
    234          // If false, it is configured only on the coordinator and sent to other
    235          // devices upon joining.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    236          uint8 zgPreConfigKeys = FALSE;
   \                     zgPreConfigKeys:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    237          
    238          // The type of link key in use.  This will determine the security
    239          // policies associated with sending and receiving APS messages.
    240          // If ZG_GLOBAL_LINK_KEY APS TCLK security may be used for specific APS commands
    241          // If ZG_UNIQUE_LINK_KEY APS TCLK security is required for specific APS commands

   \                                 In  segment XDATA_I, align 1, keep-with-next
    242          uint8 zgApsLinkKeyType = ZG_GLOBAL_LINK_KEY;
   \                     zgApsLinkKeyType:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgApsLinkKeyType>`
   \   000001                REQUIRE __INIT_XDATA_I
    243          
    244          // With changes introduced in R20 of the ZigBee specification,
    245          // boolean value of zgUseDefaultTCLK is set depending on zgApsLinkKeyType value.
    246          //
    247          // For zgApsLinkKeyType = ZG_GLOBAL_LINK_KEY, zgUseDefaultTCLK = TRUE
    248          // For zgApsLinkKeyType = ZG_UNIQUE_LINK_KEY, different devices have
    249          // different value:
    250          //      ZC should have             zgUseDefaultTCLK = FALSE
    251          //      Other devices should have  zgUseDefaultTCLK = TRUE
    252          // This is initialized in zgInitItems()
    253          // If ZG_UNIQUE_LINK_KEY, individual trust center link key between each device
    254          // and the trust center should be manually configured via MT_SYS_OSAL_NV_WRITE

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    255          uint8 zgUseDefaultTCLK;
   \                     zgUseDefaultTCLK:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    256          
    257          #if defined ( APP_TP2_TEST_MODE )
    258          uint8 guTxApsSecON = FALSE;
    259          uint8 guEnforceRxApsSec = TP_GU_ALL;
    260          #endif
    261          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    262          uint8 zgApsAllowR19Sec = FALSE;
   \                     zgApsAllowR19Sec:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    263          
    264          /*********************************************************************
    265           * ZDO GLOBAL VARIABLES
    266           */
    267          
    268          // Configured PAN ID

   \                                 In  segment XDATA_I, align 1, keep-with-next
    269          uint16 zgConfigPANID = ZDAPP_CONFIG_PAN_ID;
   \                     zgConfigPANID:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for zgConfigPANID>`
   \   000002                REQUIRE __INIT_XDATA_I
    270          
    271          // Device Logical Type

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    272          uint8 zgDeviceLogicalType = DEVICE_LOGICAL_TYPE;
   \                     zgDeviceLogicalType:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    273          
    274          // Startup Delay

   \                                 In  segment XDATA_I, align 1, keep-with-next
    275          uint8 zgStartDelay = START_DELAY;
   \                     zgStartDelay:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgStartDelay>`
   \   000001                REQUIRE __INIT_XDATA_I
    276          
    277          #if !defined MT_TASK
    278          // Flag to use verbose (i.e. "cc2480-style") direct MT callbacks in ZDProfile.c, ZDP_IncomingData().

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    279          uint8 zgZdoDirectCB = FALSE;
   \                     zgZdoDirectCB:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    280          #endif
    281          
    282          // Min number of attempted transmissions for Channel Interference detection

   \                                 In  segment XDATA_I, align 1, keep-with-next
    283          uint8 zgNwkMgrMinTransmissions = ZDNWKMGR_MIN_TRANSMISSIONS;
   \                     zgNwkMgrMinTransmissions:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkMgrMinTransmissions>`
   \   000001                REQUIRE __INIT_XDATA_I
    284          
    285          /*********************************************************************
    286           * APPLICATION GLOBAL VARIABLES
    287           */
    288          
    289          // Network Manager Mode

   \                                 In  segment XDATA_I, align 1, keep-with-next
    290          uint8 zgNwkMgrMode = ZDNWKMGR_ENABLE;
   \                     zgNwkMgrMode:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgNwkMgrMode>`
   \   000001                REQUIRE __INIT_XDATA_I
    291          
    292          /*********************************************************************
    293           * NON-STANDARD GLOBAL VARIABLES
    294           */
    295          
    296          // Simple API Endpoint

   \                                 In  segment XDATA_I, align 1, keep-with-next
    297          uint8 zgSapiEndpoint = SAPI_ENDPOINT;
   \                     zgSapiEndpoint:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zgSapiEndpoint>`
   \   000001                REQUIRE __INIT_XDATA_I
    298          
    299          /*********************************************************************
    300           * LOCAL VARIABLES
    301           */
    302          
    303          /*********************************************************************
    304           * ZGlobal Item Table
    305           */

   \                                 In  segment CODE_C, align 1
    306          static CONST zgItem_t zgItemTable[] =
   \                     zgItemTable:
   \   000000   0000         DW 0
   \   000002   0000         DW 0
   \   000004   0000         DW 0H
    307          {
    308          #if defined ( NV_INIT )
    309          #if !defined MT_TASK
    310            {
    311              ZCD_NV_ZDO_DIRECT_CB, sizeof(zgZdoDirectCB), &zgZdoDirectCB
    312            },
    313          #endif
    314            {
    315              ZCD_NV_LOGICAL_TYPE, sizeof(zgDeviceLogicalType), &zgDeviceLogicalType
    316            },
    317            {
    318              ZCD_NV_POLL_RATE, sizeof(zgPollRate), &zgPollRate
    319            },
    320            {
    321              ZCD_NV_QUEUED_POLL_RATE, sizeof(zgQueuedPollRate), &zgQueuedPollRate
    322            },
    323            {
    324              ZCD_NV_RESPONSE_POLL_RATE, sizeof(zgResponsePollRate), &zgResponsePollRate
    325            },
    326            {
    327              ZCD_NV_REJOIN_POLL_RATE, sizeof(zgRejoinPollRate), &zgRejoinPollRate
    328            },
    329            {
    330              ZCD_NV_DATA_RETRIES, sizeof(zgMaxDataRetries), &zgMaxDataRetries
    331            },
    332            {
    333              ZCD_NV_POLL_FAILURE_RETRIES, sizeof(zgMaxPollFailureRetries), &zgMaxPollFailureRetries
    334            },
    335            {
    336              ZCD_NV_CHANLIST, sizeof(zgDefaultChannelList), &zgDefaultChannelList
    337            },
    338            {
    339              ZCD_NV_SCAN_DURATION, sizeof(zgDefaultStartingScanDuration), &zgDefaultStartingScanDuration
    340            },
    341            {
    342              ZCD_NV_STACK_PROFILE, sizeof(zgStackProfile), &zgStackProfile
    343            },
    344            {
    345              ZCD_NV_INDIRECT_MSG_TIMEOUT, sizeof(zgIndirectMsgTimeout), &zgIndirectMsgTimeout
    346            },
    347            {
    348              ZCD_NV_ROUTE_EXPIRY_TIME, sizeof(zgRouteExpiryTime), &zgRouteExpiryTime
    349            },
    350            {
    351              ZCD_NV_EXTENDED_PAN_ID, Z_EXTADDR_LEN, zgExtendedPANID
    352            },
    353            {
    354              ZCD_NV_BCAST_RETRIES, sizeof(zgMaxBcastRetires), &zgMaxBcastRetires
    355            },
    356            {
    357              ZCD_NV_PASSIVE_ACK_TIMEOUT, sizeof(zgPassiveAckTimeout), &zgPassiveAckTimeout
    358            },
    359            {
    360              ZCD_NV_BCAST_DELIVERY_TIME, sizeof(zgBcastDeliveryTime), &zgBcastDeliveryTime
    361            },
    362            {
    363              ZCD_NV_NWK_MODE, sizeof(zgNwkMode), &zgNwkMode
    364            },
    365            {
    366              ZCD_NV_CONCENTRATOR_ENABLE, sizeof(zgConcentratorEnable), &zgConcentratorEnable
    367            },
    368            {
    369              ZCD_NV_CONCENTRATOR_DISCOVERY, sizeof(zgConcentratorDiscoveryTime), &zgConcentratorDiscoveryTime
    370            },
    371            {
    372              ZCD_NV_CONCENTRATOR_RADIUS, sizeof(zgConcentratorRadius), &zgConcentratorRadius
    373            },
    374            {
    375              ZCD_NV_CONCENTRATOR_RC, sizeof(zgConcentratorRC), &zgConcentratorRC
    376            },
    377            {
    378              ZCD_NV_SRC_RTG_EXPIRY_TIME, sizeof(zgNwkSrcRtgExpiryTime), &zgNwkSrcRtgExpiryTime
    379            },
    380            {
    381              ZCD_NV_ROUTE_DISCOVERY_TIME, sizeof(zgRouteDiscoveryTime), &zgRouteDiscoveryTime
    382            },
    383          #ifndef NONWK
    384            {
    385              ZCD_NV_PANID, sizeof(zgConfigPANID), &zgConfigPANID
    386            },
    387            {
    388              ZCD_NV_PRECFGKEYS_ENABLE, sizeof(zgPreConfigKeys), &zgPreConfigKeys
    389            },
    390            {
    391              ZCD_NV_SECURITY_MODE, sizeof(zgSecurityMode), &zgSecurityMode
    392            },
    393            {
    394              ZCD_NV_SECURE_PERMIT_JOIN, sizeof(zgSecurePermitJoin), &zgSecurePermitJoin
    395            },
    396            {
    397              ZCD_NV_USE_DEFAULT_TCLK, sizeof(zgUseDefaultTCLK), &zgUseDefaultTCLK
    398            },
    399            {
    400              ZCD_NV_TRUSTCENTER_ADDR, Z_EXTADDR_LEN, zgApsTrustCenterAddr
    401            },
    402            {
    403              ZCD_NV_APS_LINK_KEY_TYPE, sizeof(zgApsLinkKeyType), &zgApsLinkKeyType
    404            },
    405          #endif // NONWK
    406            {
    407              ZCD_NV_APS_FRAME_RETRIES, sizeof(zgApscMaxFrameRetries), &zgApscMaxFrameRetries
    408            },
    409            {
    410              ZCD_NV_APS_ACK_WAIT_DURATION, sizeof(zgApscAckWaitDurationPolled), &zgApscAckWaitDurationPolled
    411            },
    412            {
    413              ZCD_NV_APS_ACK_WAIT_MULTIPLIER, sizeof(zgApsAckWaitMultiplier), &zgApsAckWaitMultiplier
    414            },
    415            {
    416              ZCD_NV_BINDING_TIME, sizeof(zgApsDefaultMaxBindingTime), &zgApsDefaultMaxBindingTime
    417            },
    418            {
    419              ZCD_NV_APS_USE_EXT_PANID, Z_EXTADDR_LEN, zgApsUseExtendedPANID
    420            },
    421            {
    422              ZCD_NV_APS_USE_INSECURE_JOIN, sizeof(zgApsUseInsecureJoin), &zgApsUseInsecureJoin
    423            },
    424            {
    425              ZCD_NV_APS_NONMEMBER_RADIUS, sizeof(zgApsNonMemberRadius), &zgApsNonMemberRadius
    426            },
    427            {
    428              ZCD_NV_START_DELAY, sizeof(zgStartDelay), &zgStartDelay
    429            },
    430            {
    431              ZCD_NV_SAPI_ENDPOINT, sizeof(zgSapiEndpoint), &zgSapiEndpoint
    432            },
    433            {
    434              ZCD_NV_NWK_MGR_MODE, sizeof(zgNwkMgrMode), &zgNwkMgrMode
    435            },
    436            {
    437              ZCD_NV_NWKMGR_MIN_TX, sizeof(zgNwkMgrMinTransmissions), &zgNwkMgrMinTransmissions
    438            },
    439            {
    440              ZCD_NV_ROUTER_OFF_ASSOC_CLEANUP, sizeof(zgRouterOffAssocCleanup), &zgRouterOffAssocCleanup
    441            },
    442            {
    443              ZCD_NV_NWK_LEAVE_REQ_ALLOWED, sizeof(zgNwkLeaveRequestAllowed), &zgNwkLeaveRequestAllowed
    444            },
    445            {
    446              ZCD_NV_COMMISSIONED_NWK_ADDR, sizeof(zgNwkCommissionedNwkAddr), &zgNwkCommissionedNwkAddr
    447            },
    448            {
    449              ZCD_NV_APS_ALLOW_R19_SECURITY, sizeof(zgApsAllowR19Sec), &zgApsAllowR19Sec
    450            },
    451            {
    452              ZCD_NV_APS_DUPREJ_TIMEOUT_INC, sizeof(zgApscDupRejTimeoutInc), &zgApscDupRejTimeoutInc
    453            },
    454            {
    455              ZCD_NV_APS_DUPREJ_TIMEOUT_COUNT, sizeof(zgApscDupRejTimeoutCount), &zgApscDupRejTimeoutCount
    456            },
    457            {
    458              ZCD_NV_APS_DUPREJ_TABLE_SIZE, sizeof(zgApsMinDupRejTableSize), &zgApsMinDupRejTableSize
    459            },
    460            {
    461              ZCD_NV_NWK_CHILD_AGE_ENABLE, sizeof(zgChildAgingEnable), &zgChildAgingEnable
    462            },
    463            {
    464              ZCD_NV_NWK_PARENT_INFO, sizeof(zgNwkParentInformation), &zgNwkParentInformation
    465            },
    466            {
    467              ZCD_NV_NWK_ENDDEV_TIMEOUT_DEF, sizeof(zgNwkEndDeviceTimeoutDefault), &zgNwkEndDeviceTimeoutDefault
    468            },
    469            {
    470              ZCD_NV_END_DEV_TIMEOUT_VALUE, sizeof(zgEndDeviceTimeoutValue), &zgEndDeviceTimeoutValue
    471            },
    472            {
    473              ZCD_NV_END_DEV_CONFIGURATION, sizeof(zgEndDeviceConfiguration), &zgEndDeviceConfiguration
    474            },
    475          #endif // NV_INIT
    476            // Last item -- DO NOT MOVE IT!
    477            {
    478              0x00, 0, NULL
    479            }
    480          };
    481          
    482          /*********************************************************************
    483           * LOCAL FUNCTIONS
    484           */
    485          
    486          static uint8 zgItemInit( uint16 id, uint16 len, void *buf, uint8 setDefault );
    487          
    488          static void zgUpgradeNVItems( void );
    489          
    490          #ifndef NONWK
    491          static uint8 zgPreconfigKeyInit( uint8 setDefault );
    492          #endif
    493          
    494          /*********************************************************************
    495           * @fn       zgItemInit()
    496           *
    497           * @brief
    498           *
    499           *   Initialize a global item. If the item doesn't exist in NV memory,
    500           *   write the system default (value passed in) into NV memory. But if
    501           *   it exists, set the item to the value stored in NV memory.
    502           *
    503           *   Also, if setDefault is TRUE and the item exists, we will write
    504           *   the default value to NV space.
    505           *
    506           * @param   id - item id
    507           * @param   len - item len
    508           * @param   buf - pointer to the item
    509           * @param   setDefault - TRUE to set default, not read
    510           *
    511           * @return  ZSUCCESS if successful, NV_ITEM_UNINIT if item did not
    512           *          exist in NV, NV_OPER_FAILED if failure.
    513           */
    514          static uint8 zgItemInit( uint16 id, uint16 len, void *buf, uint8 setDefault )
    515          {
    516            uint8 status;
    517          
    518            // If the item doesn't exist in NV memory, create and initialize
    519            // it with the value passed in.
    520            status = osal_nv_item_init( id, len, buf );
    521            if ( status == ZSUCCESS )
    522            {
    523              if ( setDefault )
    524              {
    525                // Write the default value back to NV
    526                status = osal_nv_write( id, 0, len, buf );
    527              }
    528              else
    529              {
    530                // The item exists in NV memory, read it from NV memory
    531                status = osal_nv_read( id, 0, len, buf );
    532              }
    533            }
    534          
    535            return (status);
    536          }
    537          
    538          /*********************************************************************
    539           * API FUNCTIONS
    540           */
    541          
    542          /*********************************************************************
    543           * @fn          zgInit
    544           *
    545           * @brief
    546           *
    547           *   Initialize the Z-Stack Globals. If an item doesn't exist in
    548           *   NV memory, write the system default into NV memory. But if
    549           *   it exists, set the item to the value stored in NV memory.
    550           *
    551           * NOTE: The Startup Options (ZCD_NV_STARTUP_OPTION) indicate
    552           *       that the Config state items (zgItemTable) need to be
    553           *       set to defaults (ZCD_STARTOPT_DEFAULT_CONFIG_STATE). The
    554           *
    555           * @param       none
    556           *
    557           * @return      ZSUCCESS if successful, NV_ITEM_UNINIT if item did not
    558           *              exist in NV, NV_OPER_FAILED if failure.
    559           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    560          uint8 zgInit( void )
   \                     zgInit:
    561          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   74F4         MOV       A,#-0xc
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 18
   \   000005   74EE         MOV       A,#-0x12
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
    562            uint8  setDefault = FALSE;
   \   00000A   7E00         MOV       R6,#0x0
    563          
    564            // Do we want to default the Config state values
    565            if ( zgReadStartupOptions() & ZCD_STARTOPT_DEFAULT_CONFIG_STATE )
   \   00000C                ; Setup parameters for call to function zgReadStartupOptions
   \   00000C   12....       LCALL     `??zgReadStartupOptions::?relay`; Banked call to: zgReadStartupOptions
   \   00000F   E9           MOV       A,R1
   \   000010   F8           MOV       R0,A
   \   000011   A2E0         MOV       C,0xE0 /* A   */.0
   \   000013   5002         JNC       ??zgInit_0
    566            {
    567              setDefault = TRUE;
   \   000015   7E01         MOV       R6,#0x1
    568            }
    569          
    570          #if defined ( FEATURE_SYSTEM_STATS )
    571            {
    572              // This sections tracks the number of resets
    573              uint16 bootCnt = 0;
   \                     ??zgInit_0:
   \   000017   85..82       MOV       DPL,?XSP + 0
   \   00001A   85..83       MOV       DPH,?XSP + 1
   \   00001D   E4           CLR       A
   \   00001E   F0           MOVX      @DPTR,A
   \   00001F   A3           INC       DPTR
   \   000020   12....       LCALL     ??Subroutine6_0 & 0xFFFF
    574          
    575              // Update the Boot Counter
    576              if ( osal_nv_item_init( ZCD_NV_BOOTCOUNTER, sizeof(bootCnt), &bootCnt ) == ZSUCCESS )
   \                     ??CrossCallReturnLabel_11:
   \   000023   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000026   7C02         MOV       R4,#0x2
   \   000028   7D00         MOV       R5,#0x0
   \   00002A   7A02         MOV       R2,#0x2
   \   00002C   12....       LCALL     ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   00002F   12....       LCALL     ?DEALLOC_XSTACK8
   \   000032   E9           MOV       A,R1
   \   000033   701C         JNZ       ??zgInit_1
    577              {
    578                // Get the old value from NV memory
    579                osal_nv_read( ZCD_NV_BOOTCOUNTER, 0, sizeof(bootCnt), &bootCnt );
   \   000035                ; Setup parameters for call to function osal_nv_read
   \   000035   78..         MOV       R0,#?V0
   \   000037   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00003A   75..02       MOV       ?V0,#0x2
   \   00003D   75..00       MOV       ?V1,#0x0
   \   000040   78..         MOV       R0,#?V0
   \   000042   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000045   7C00         MOV       R4,#0x0
   \   000047   7D00         MOV       R5,#0x0
   \   000049   7A02         MOV       R2,#0x2
   \   00004B   12....       LCALL     ??Subroutine5_0 & 0xFFFF
    580              }
   \                     ??CrossCallReturnLabel_7:
   \   00004E   12....       LCALL     ?DEALLOC_XSTACK8
    581          
    582              // Increment the Boot Counter and store it into NV memory
    583              if ( setDefault )
   \                     ??zgInit_1:
   \   000051   EE           MOV       A,R6
   \   000052   A2E0         MOV       C,0xE0 /* A   */.0
   \   000054   85..82       MOV       DPL,?XSP + 0
   \   000057   85..83       MOV       DPH,?XSP + 1
   \   00005A   5005         JNC       ??zgInit_2
    584              {
    585                bootCnt = 0;
   \   00005C   E4           CLR       A
   \   00005D   F0           MOVX      @DPTR,A
   \   00005E   A3           INC       DPTR
   \   00005F   8008         SJMP      ??zgInit_3
    586              }
    587              else
    588              {
    589                bootCnt++;
   \                     ??zgInit_2:
   \   000061   E0           MOVX      A,@DPTR
   \   000062   2401         ADD       A,#0x1
   \   000064   F0           MOVX      @DPTR,A
   \   000065   A3           INC       DPTR
   \   000066   E0           MOVX      A,@DPTR
   \   000067   3400         ADDC      A,#0x0
    590              }
    591          
    592              osal_nv_write( ZCD_NV_BOOTCOUNTER, 0, sizeof(bootCnt), &bootCnt );
    593            }
   \                     ??zgInit_3:
   \   000069   12....       LCALL     ??Subroutine6_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   00006C   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00006F   75..02       MOV       ?V0,#0x2
   \   000072   75..00       MOV       ?V1,#0x0
   \   000075   78..         MOV       R0,#?V0
   \   000077   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00007A   7C00         MOV       R4,#0x0
   \   00007C   7D00         MOV       R5,#0x0
   \   00007E   7A02         MOV       R2,#0x2
   \   000080   7B00         MOV       R3,#0x0
   \   000082   12....       LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
   \   000085   7404         MOV       A,#0x4
   \   000087   12....       LCALL     ?DEALLOC_XSTACK8
    594          #endif  // FEATURE_SYSTEM_STATS
    595          
    596            zgUpgradeNVItems();
   \   00008A                ; Setup parameters for call to function osal_nv_item_len
   \   00008A   7A24         MOV       R2,#0x24
   \   00008C   7B00         MOV       R3,#0x0
   \   00008E   12....       LCALL     `??osal_nv_item_len::?relay`; Banked call to: osal_nv_item_len
   \   000091   8A..         MOV       ?V0,R2
   \   000093   8B..         MOV       ?V1,R3
   \   000095                ; Setup parameters for call to function osal_nv_item_len
   \   000095   7A35         MOV       R2,#0x35
   \   000097   7B00         MOV       R3,#0x0
   \   000099   12....       LCALL     `??osal_nv_item_len::?relay`; Banked call to: osal_nv_item_len
   \   00009C   EA           MOV       A,R2
   \   00009D   4B           ORL       A,R3
   \   00009E   7066         JNZ       ??zgInit_4
   \   0000A0   7402         MOV       A,#0x2
   \   0000A2   65..         XRL       A,?V0
   \   0000A4   45..         ORL       A,?V1
   \   0000A6   705E         JNZ       ??zgInit_4
   \   0000A8                ; Setup parameters for call to function osal_nv_read
   \   0000A8   A8..         MOV       R0,?XSP + 0
   \   0000AA   A9..         MOV       R1,?XSP + 1
   \   0000AC   88..         MOV       ?V0,R0
   \   0000AE   89..         MOV       ?V1,R1
   \   0000B0   78..         MOV       R0,#?V0
   \   0000B2   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0000B5   75..02       MOV       ?V0,#0x2
   \   0000B8   75..00       MOV       ?V1,#0x0
   \   0000BB   78..         MOV       R0,#?V0
   \   0000BD   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0000C0   7C00         MOV       R4,#0x0
   \   0000C2   7D00         MOV       R5,#0x0
   \   0000C4   7A24         MOV       R2,#0x24
   \   0000C6   12....       LCALL     ??Subroutine5_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   0000C9   12....       LCALL     ?DEALLOC_XSTACK8
   \   0000CC   85..82       MOV       DPL,?XSP + 0
   \   0000CF   85..83       MOV       DPH,?XSP + 1
   \   0000D2   E0           MOVX      A,@DPTR
   \   0000D3   F8           MOV       R0,A
   \   0000D4   A3           INC       DPTR
   \   0000D5   E0           MOVX      A,@DPTR
   \   0000D6   F9           MOV       R1,A
   \   0000D7   90....       MOV       DPTR,#zgPollRate
   \   0000DA   E8           MOV       A,R0
   \   0000DB   F0           MOVX      @DPTR,A
   \   0000DC   A3           INC       DPTR
   \   0000DD   E9           MOV       A,R1
   \   0000DE   F0           MOVX      @DPTR,A
   \   0000DF   A3           INC       DPTR
   \   0000E0   E4           CLR       A
   \   0000E1   F0           MOVX      @DPTR,A
   \   0000E2   A3           INC       DPTR
   \   0000E3   F0           MOVX      @DPTR,A
   \   0000E4                ; Setup parameters for call to function osal_nv_item_init
   \   0000E4   75....       MOV       ?V0,#zgPollRate & 0xff
   \   0000E7   75....       MOV       ?V1,#(zgPollRate >> 8) & 0xff
   \   0000EA   78..         MOV       R0,#?V0
   \   0000EC   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0000EF   7C04         MOV       R4,#0x4
   \   0000F1   7D00         MOV       R5,#0x0
   \   0000F3   7A35         MOV       R2,#0x35
   \   0000F5   12....       LCALL     ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   0000F8   12....       LCALL     ?DEALLOC_XSTACK8
   \   0000FB                ; Setup parameters for call to function osal_nv_delete
   \   0000FB   7C02         MOV       R4,#0x2
   \   0000FD   7D00         MOV       R5,#0x0
   \   0000FF   7A24         MOV       R2,#0x24
   \   000101   7B00         MOV       R3,#0x0
   \   000103   12....       LCALL     `??osal_nv_delete::?relay`; Banked call to: osal_nv_delete
    597          
    598            // Initialize the Extended PAN ID as my own extended address
    599            ZMacGetReq( ZMacExtAddr, zgExtendedPANID );
   \                     ??zgInit_4:
   \   000106                ; Setup parameters for call to function ZMacGetReq
   \   000106   7A..         MOV       R2,#zgExtendedPANID & 0xff
   \   000108   7B..         MOV       R3,#(zgExtendedPANID >> 8) & 0xff
   \   00010A   79E2         MOV       R1,#-0x1e
   \   00010C   12....       LCALL     `??ZMacGetReq::?relay`; Banked call to: ZMacGetReq
    600          
    601            // Initialize the items table
    602            zgInitItems( setDefault );
   \   00010F                ; Setup parameters for call to function zgInitItems
   \   00010F   EE           MOV       A,R6
   \   000110   F9           MOV       R1,A
   \   000111   12....       LCALL     `??zgInitItems::?relay`; Banked call to: zgInitItems
    603          
    604          #ifndef NONWK
    605            if ( ZG_SECURE_ENABLED )
    606            {
    607              // Initialize the Pre-Configured Key to the default key
    608              zgPreconfigKeyInit( setDefault );
   \   000114                ; Setup parameters for call to function osal_memcpy
   \   000114   75....       MOV       ?V0,#defaultKey & 0xff
   \   000117   75....       MOV       ?V1,#(defaultKey >> 8) & 0xff
   \   00011A   75..80       MOV       ?V2,#-0x80
   \   00011D   78..         MOV       R0,#?V0
   \   00011F   12....       LCALL     ?PUSH_XSTACK_I_THREE
   \   000122   7C10         MOV       R4,#0x10
   \   000124   7D00         MOV       R5,#0x0
   \   000126   7405         MOV       A,#0x5
   \   000128   12....       LCALL     ?XSTACK_DISP101_8
   \   00012B   12....       LCALL     `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   00012E   7403         MOV       A,#0x3
   \   000130   12....       LCALL     ?DEALLOC_XSTACK8
   \   000133                ; Setup parameters for call to function osal_nv_item_init
   \   000133   7402         MOV       A,#0x2
   \   000135   12....       LCALL     ?XSTACK_DISP100_8
   \   000138   88..         MOV       ?V0,R0
   \   00013A   89..         MOV       ?V1,R1
   \   00013C   78..         MOV       R0,#?V0
   \   00013E   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000141   7C10         MOV       R4,#0x10
   \   000143   7D00         MOV       R5,#0x0
   \   000145   7A62         MOV       R2,#0x62
   \   000147   12....       LCALL     ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   00014A   12....       LCALL     ?DEALLOC_XSTACK8
   \   00014D   E9           MOV       A,R1
   \   00014E   7025         JNZ       ??zgInit_5
   \   000150   EE           MOV       A,R6
   \   000151   A2E0         MOV       C,0xE0 /* A   */.0
   \   000153   5020         JNC       ??zgInit_5
   \   000155                ; Setup parameters for call to function osal_nv_write
   \   000155   78..         MOV       R0,#?V0
   \   000157   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00015A   75..10       MOV       ?V0,#0x10
   \   00015D   75..00       MOV       ?V1,#0x0
   \   000160   78..         MOV       R0,#?V0
   \   000162   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000165   7C00         MOV       R4,#0x0
   \   000167   7D00         MOV       R5,#0x0
   \   000169   7A62         MOV       R2,#0x62
   \   00016B   7B00         MOV       R3,#0x0
   \   00016D   12....       LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
   \   000170   7404         MOV       A,#0x4
   \   000172   12....       LCALL     ?DEALLOC_XSTACK8
   \                     ??zgInit_5:
   \   000175                ; Setup parameters for call to function osal_memset
   \   000175   7C10         MOV       R4,#0x10
   \   000177   7D00         MOV       R5,#0x0
   \   000179   7900         MOV       R1,#0x0
   \   00017B   7402         MOV       A,#0x2
   \   00017D   12....       LCALL     ?XSTACK_DISP101_8
   \   000180   12....       LCALL     `??osal_memset::?relay`; Banked call to: osal_memset
    609          
    610              // Initialize NV items for all Keys: NWK, APS, TCLK and Master
    611              ZDSecMgrInitNVKeyTables( setDefault );
   \   000183                ; Setup parameters for call to function ZDSecMgrInitNVKeyTables
   \   000183   EE           MOV       A,R6
   \   000184   F9           MOV       R1,A
   \   000185   12....       LCALL     `??ZDSecMgrInitNVKeyTables::?relay`; Banked call to: ZDSecMgrInitNVKeyTables
    612            }
    613          #endif // NONWK
    614          
    615            // Clear the Config State default
    616            if ( setDefault )
   \   000188   EE           MOV       A,R6
   \   000189   A2E0         MOV       C,0xE0 /* A   */.0
   \   00018B   5007         JNC       ??zgInit_6
    617            {
    618              zgWriteStartupOptions( ZG_STARTUP_CLEAR, ZCD_STARTOPT_DEFAULT_CONFIG_STATE );
   \   00018D                ; Setup parameters for call to function zgWriteStartupOptions
   \   00018D   7A01         MOV       R2,#0x1
   \   00018F   7900         MOV       R1,#0x0
   \   000191   12....       LCALL     `??zgWriteStartupOptions::?relay`; Banked call to: zgWriteStartupOptions
    619            }
    620          
    621            return ( ZSUCCESS );
   \                     ??zgInit_6:
   \   000194   7900         MOV       R1,#0x0
   \   000196   7412         MOV       A,#0x12
   \   000198   12....       LCALL     ?DEALLOC_XSTACK8
   \   00019B   7F04         MOV       R7,#0x4
   \   00019D   02....       LJMP      ?BANKED_LEAVE_XDATA
    622          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   7B00         MOV       R3,#0x0
   \   000002                REQUIRE ??Subroutine4_0
   \   000002                ; // Fall through to label ??Subroutine4_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine4_0:
   \   000000   12....       LCALL     `??osal_nv_item_init::?relay`; Banked call to: osal_nv_item_init
   \   000003   7402         MOV       A,#0x2
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine5_0:
   \   000000   7B00         MOV       R3,#0x0
   \   000002   12....       LCALL     `??osal_nv_read::?relay`; Banked call to: osal_nv_read
   \   000005   7404         MOV       A,#0x4
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine6_0:
   \   000000   F0           MOVX      @DPTR,A
   \   000001                ; Setup parameters for call to function osal_nv_item_init
   \   000001                ; Setup parameters for call to function osal_nv_read
   \   000001                ; Setup parameters for call to function osal_nv_item_init
   \   000001                ; Setup parameters for call to function osal_nv_write
   \   000001                ; Setup parameters for call to function osal_nv_write
   \   000001   A8..         MOV       R0,?XSP + 0
   \   000003   A9..         MOV       R1,?XSP + 1
   \   000005   88..         MOV       ?V0,R0
   \   000007   89..         MOV       ?V1,R1
   \   000009   78..         MOV       R0,#?V0
   \   00000B   22           RET
    623          
    624          /*********************************************************************
    625           * @fn          zgInitItems
    626           *
    627           * @brief       Initializes RAM variables from NV.  If NV items don't
    628           *              exist, then the NV is initialize with what is in RAM
    629           *              variables.
    630           *
    631           * @param       none
    632           *
    633           * @return      none
    634           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    635          void zgInitItems( uint8 setDefault )
   \                     zgInitItems:
    636          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000   74F2         MOV       A,#-0xe
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   89..         MOV       ?V5,R1
    637            uint8  i = 0;
   \   000007   75..00       MOV       ?V4,#0x0
    638          
    639            if ( ZG_BUILD_COORDINATOR_TYPE && ( zgApsLinkKeyType == ZG_UNIQUE_LINK_KEY ) )
   \   00000A   90....       MOV       DPTR,#zgApsLinkKeyType
   \   00000D   E0           MOVX      A,@DPTR
   \   00000E   90....       MOV       DPTR,#zgUseDefaultTCLK
   \   000011   7003         JNZ       ??zgInitItems_0
    640            {
    641              zgUseDefaultTCLK = FALSE;
   \   000013   E4           CLR       A
   \   000014   8002         SJMP      ??zgInitItems_1
    642            }
    643            else
    644            {
    645              // Most of the time default TCLK will be used
    646              zgUseDefaultTCLK = TRUE;
   \                     ??zgInitItems_0:
   \   000016   7401         MOV       A,#0x1
   \                     ??zgInitItems_1:
   \   000018   F0           MOVX      @DPTR,A
   \   000019   801A         SJMP      ??zgInitItems_2
    647            }
    648          
    649            while ( zgItemTable[i].id != 0x00 )
    650            {
   \                     ??zgInitItems_3:
   \   00001B                ; Setup parameters for call to function osal_nv_read
   \   00001B   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00001E   78..         MOV       R0,#?V0
   \   000020   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000023   7C00         MOV       R4,#0x0
   \   000025   7D00         MOV       R5,#0x0
   \   000027   EE           MOV       A,R6
   \   000028   FA           MOV       R2,A
   \   000029   EF           MOV       A,R7
   \   00002A   FB           MOV       R3,A
   \   00002B   12....       LCALL     `??osal_nv_read::?relay`; Banked call to: osal_nv_read
   \                     ??zgInitItems_4:
   \   00002E   7404         MOV       A,#0x4
   \   000030   12....       LCALL     ?DEALLOC_XSTACK8
    651              // Initialize the item
    652              zgItemInit( zgItemTable[i].id, zgItemTable[i].len, zgItemTable[i].buf, setDefault  );
    653          
    654              // Move on to the next item
    655              i++;
   \                     ??zgInitItems_5:
   \   000033   05..         INC       ?V4
   \                     ??zgInitItems_2:
   \   000035   E5..         MOV       A,?V4
   \   000037   75F006       MOV       B,#0x6
   \   00003A   A4           MUL       AB
   \   00003B   F8           MOV       R0,A
   \   00003C   A9F0         MOV       R1,B
   \   00003E   74..         MOV       A,#zgItemTable & 0xff
   \   000040   28           ADD       A,R0
   \   000041   F8           MOV       R0,A
   \   000042   74..         MOV       A,#(zgItemTable >> 8) & 0xff
   \   000044   39           ADDC      A,R1
   \   000045   F9           MOV       R1,A
   \   000046   8882         MOV       DPL,R0
   \   000048   F583         MOV       DPH,A
   \   00004A   E4           CLR       A
   \   00004B   93           MOVC      A,@A+DPTR
   \   00004C   FA           MOV       R2,A
   \   00004D   7401         MOV       A,#0x1
   \   00004F   93           MOVC      A,@A+DPTR
   \   000050   FB           MOV       R3,A
   \   000051   EA           MOV       A,R2
   \   000052   4B           ORL       A,R3
   \   000053   606C         JZ        ??zgInitItems_6
   \   000055   A3           INC       DPTR
   \   000056   A3           INC       DPTR
   \   000057   A3           INC       DPTR
   \   000058   A3           INC       DPTR
   \   000059   E4           CLR       A
   \   00005A   93           MOVC      A,@A+DPTR
   \   00005B   F5..         MOV       ?V2,A
   \   00005D   7401         MOV       A,#0x1
   \   00005F   93           MOVC      A,@A+DPTR
   \   000060   F5..         MOV       ?V3,A
   \   000062   8882         MOV       DPL,R0
   \   000064   8983         MOV       DPH,R1
   \   000066   A3           INC       DPTR
   \   000067   A3           INC       DPTR
   \   000068   E4           CLR       A
   \   000069   93           MOVC      A,@A+DPTR
   \   00006A   C0E0         PUSH      A
   \   00006C   7401         MOV       A,#0x1
   \   00006E   93           MOVC      A,@A+DPTR
   \   00006F   F583         MOV       DPH,A
   \   000071   D082         POP       DPL
   \   000073   8582..       MOV       ?V0,DPL
   \   000076   8583..       MOV       ?V1,DPH
   \   000079   8882         MOV       DPL,R0
   \   00007B   8983         MOV       DPH,R1
   \   00007D   E4           CLR       A
   \   00007E   93           MOVC      A,@A+DPTR
   \   00007F   C0E0         PUSH      A
   \   000081   7401         MOV       A,#0x1
   \   000083   93           MOVC      A,@A+DPTR
   \   000084   F583         MOV       DPH,A
   \   000086   D082         POP       DPL
   \   000088   AE82         MOV       R6,DPL
   \   00008A   AF83         MOV       R7,DPH
   \   00008C                ; Setup parameters for call to function osal_nv_item_init
   \   00008C   78..         MOV       R0,#?V2
   \   00008E   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000091   AC..         MOV       R4,?V0
   \   000093   AD..         MOV       R5,?V1
   \   000095   EE           MOV       A,R6
   \   000096   FA           MOV       R2,A
   \   000097   EF           MOV       A,R7
   \   000098   FB           MOV       R3,A
   \   000099   12....       LCALL     ??Subroutine4_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   00009C   12....       LCALL     ?DEALLOC_XSTACK8
   \   00009F   E9           MOV       A,R1
   \   0000A0   7091         JNZ       ??zgInitItems_5
   \   0000A2   E5..         MOV       A,?V5
   \   0000A4   78..         MOV       R0,#?V2
   \   0000A6   7003         JNZ       $+5
   \   0000A8   02....       LJMP      ??zgInitItems_3 & 0xFFFF
   \   0000AB                ; Setup parameters for call to function osal_nv_write
   \   0000AB   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0000AE   78..         MOV       R0,#?V0
   \   0000B0   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0000B3   7C00         MOV       R4,#0x0
   \   0000B5   7D00         MOV       R5,#0x0
   \   0000B7   EE           MOV       A,R6
   \   0000B8   FA           MOV       R2,A
   \   0000B9   EF           MOV       A,R7
   \   0000BA   FB           MOV       R3,A
   \   0000BB   12....       LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
   \   0000BE   02....       LJMP      ??zgInitItems_4 & 0xFFFF
    656            }
    657          }
   \                     ??zgInitItems_6:
   \   0000C1   7F06         MOV       R7,#0x6
   \   0000C3   02....       LJMP      ?BANKED_LEAVE_XDATA
    658          
    659          /*********************************************************************
    660           * @fn          zgReadStartupOptions
    661           *
    662           * @brief       Reads the ZCD_NV_STARTUP_OPTION NV Item.
    663           *
    664           * @param       none
    665           *
    666           * @return      the ZCD_NV_STARTUP_OPTION NV item
    667           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    668          uint8 zgReadStartupOptions( void )
   \                     zgReadStartupOptions:
    669          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000   74F6         MOV       A,#-0xa
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV       A,#-0x1
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
    670            // Default to Use Config State and Use Network State
    671            uint8 startupOption = 0;
   \   00000A   12....       LCALL     ?Subroutine1 & 0xFFFF
    672          
    673            // This should have been done in ZMain.c, but just in case.
    674            if ( osal_nv_item_init( ZCD_NV_STARTUP_OPTION,
    675                                        sizeof(startupOption),
    676                                        &startupOption ) == ZSUCCESS )
   \                     ??CrossCallReturnLabel_9:
   \   00000D   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000010   7C01         MOV       R4,#0x1
   \   000012   7D00         MOV       R5,#0x0
   \   000014   7A03         MOV       R2,#0x3
   \   000016   12....       LCALL     ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   000019   12....       LCALL     ?DEALLOC_XSTACK8
   \   00001C   E9           MOV       A,R1
   \   00001D   7016         JNZ       ??zgReadStartupOptions_0
    677            {
    678              // Read saved startup control
    679              osal_nv_read( ZCD_NV_STARTUP_OPTION,
    680                            0,
    681                            sizeof( startupOption ),
    682                            &startupOption);
   \   00001F                ; Setup parameters for call to function osal_nv_read
   \   00001F   78..         MOV       R0,#?V0
   \   000021   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000024   75..01       MOV       ?V0,#0x1
   \   000027   75..00       MOV       ?V1,#0x0
   \   00002A   78..         MOV       R0,#?V0
   \   00002C   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00002F   12....       LCALL     ?Subroutine3 & 0xFFFF
    683            }
   \                     ??CrossCallReturnLabel_5:
   \   000032   12....       LCALL     ?DEALLOC_XSTACK8
    684            return ( startupOption );
   \                     ??zgReadStartupOptions_0:
   \   000035   85..82       MOV       DPL,?XSP + 0
   \   000038   85..83       MOV       DPH,?XSP + 1
   \   00003B   E0           MOVX      A,@DPTR
   \   00003C   F9           MOV       R1,A
   \   00003D                REQUIRE ?Subroutine0
   \   00003D                ; // Fall through to label ?Subroutine0
    685          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7401         MOV       A,#0x1
   \   000002   12....       LCALL     ?DEALLOC_XSTACK8
   \   000005   7F02         MOV       R7,#0x2
   \   000007   02....       LJMP      ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   7C00         MOV       R4,#0x0
   \   000002   7D00         MOV       R5,#0x0
   \   000004   7A03         MOV       R2,#0x3
   \   000006                REQUIRE ??Subroutine5_0
   \   000006                ; // Fall through to label ??Subroutine5_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   85..82       MOV       DPL,?XSP + 0
   \   000003   85..83       MOV       DPH,?XSP + 1
   \   000006   E4           CLR       A
   \   000007                REQUIRE ??Subroutine6_0
   \   000007                ; // Fall through to label ??Subroutine6_0
    686          
    687          /*********************************************************************
    688           * @fn          zgWriteStartupOptions
    689           *
    690           * @brief       Writes bits into the ZCD_NV_STARTUP_OPTION NV Item.
    691           *
    692           * @param       action - ZG_STARTUP_SET set bit, ZG_STARTUP_CLEAR to
    693           *               clear bit. The set bit is an OR operation, and the
    694           *               clear bit is an AND ~(bitOptions) operation.
    695           *
    696           * @param       bitOptions - which bits to perform action on:
    697           *                      ZCD_STARTOPT_DEFAULT_CONFIG_STATE
    698           *                      ZCD_STARTOPT_DEFAULT_NETWORK_STATE
    699           *
    700           * @return      ZSUCCESS if successful
    701           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    702          uint8 zgWriteStartupOptions( uint8 action, uint8 bitOptions )
   \                     zgWriteStartupOptions:
    703          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000   74F6         MOV       A,#-0xa
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV       A,#-0x1
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   \   00000A   E9           MOV       A,R1
   \   00000B   FE           MOV       R6,A
   \   00000C   EA           MOV       A,R2
   \   00000D   FF           MOV       R7,A
    704            uint8 status;
    705            uint8 startupOptions = 0;
   \   00000E   12....       LCALL     ?Subroutine1 & 0xFFFF
    706          
    707            status = osal_nv_read( ZCD_NV_STARTUP_OPTION,
    708                          0,
    709                          sizeof( startupOptions ),
    710                          &startupOptions );
   \                     ??CrossCallReturnLabel_10:
   \   000011   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000014   75..01       MOV       ?V0,#0x1
   \   000017   75..00       MOV       ?V1,#0x0
   \   00001A   78..         MOV       R0,#?V0
   \   00001C   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00001F   12....       LCALL     ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   000022   12....       LCALL     ?DEALLOC_XSTACK8
   \   000025   E9           MOV       A,R1
   \   000026   F9           MOV       R1,A
    711          
    712            if ( status == ZSUCCESS )
   \   000027   703E         JNZ       ??zgWriteStartupOptions_0
    713            {
    714              if ( action == ZG_STARTUP_SET )
   \   000029   74FF         MOV       A,#-0x1
   \   00002B   6E           XRL       A,R6
   \   00002C   700A         JNZ       ??zgWriteStartupOptions_1
    715              {
    716                // Set bits
    717                startupOptions |= bitOptions;
   \   00002E   85..82       MOV       DPL,?XSP + 0
   \   000031   85..83       MOV       DPH,?XSP + 1
   \   000034   E0           MOVX      A,@DPTR
   \   000035   4F           ORL       A,R7
   \   000036   800C         SJMP      ??zgWriteStartupOptions_2
    718              }
    719              else
    720              {
    721                // Clear bits
    722                startupOptions &= (bitOptions ^ 0xFF);
   \                     ??zgWriteStartupOptions_1:
   \   000038   74FF         MOV       A,#-0x1
   \   00003A   6F           XRL       A,R7
   \   00003B   F8           MOV       R0,A
   \   00003C   85..82       MOV       DPL,?XSP + 0
   \   00003F   85..83       MOV       DPH,?XSP + 1
   \   000042   E0           MOVX      A,@DPTR
   \   000043   58           ANL       A,R0
    723              }
    724          
    725              // Changed?
    726              status = osal_nv_write( ZCD_NV_STARTUP_OPTION,
    727                           0,
    728                           sizeof( startupOptions ),
    729                           &startupOptions );
    730            }
   \                     ??zgWriteStartupOptions_2:
   \   000044   12....       LCALL     ??Subroutine6_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000047   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00004A   75..01       MOV       ?V0,#0x1
   \   00004D   75..00       MOV       ?V1,#0x0
   \   000050   78..         MOV       R0,#?V0
   \   000052   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000055   7C00         MOV       R4,#0x0
   \   000057   7D00         MOV       R5,#0x0
   \   000059   7A03         MOV       R2,#0x3
   \   00005B   7B00         MOV       R3,#0x0
   \   00005D   12....       LCALL     `??osal_nv_write::?relay`; Banked call to: osal_nv_write
   \   000060   7404         MOV       A,#0x4
   \   000062   12....       LCALL     ?DEALLOC_XSTACK8
   \   000065   E9           MOV       A,R1
   \   000066   F9           MOV       R1,A
    731          
    732            return ( status );
   \                     ??zgWriteStartupOptions_0:
   \   000067   02....       LJMP      ?Subroutine0 & 0xFFFF
    733          }
    734          
    735          /*********************************************************************
    736           * @fn          zgSetItem
    737           *
    738           * @brief       Set RAM variables from set-NV, if it exist in the zgItemTable
    739           *
    740           * @param       id - NV ID
    741           *              len - NV item length
    742           *              buf - pointer to the input buffer
    743           *
    744           * @return      none
    745           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    746          void zgSetItem( uint16 id, uint16 len, void *buf )
   \                     zgSetItem:
    747          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000   74F5         MOV       A,#-0xb
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 0
    748          
    749            uint8  i = 0;
   \   000005   75..00       MOV       ?V0,#0x0
   \   000008   8002         SJMP      ??zgSetItem_0
    750          
    751            // Look up the NV item table
    752            while ( zgItemTable[i].id != 0x00 )
    753            {
    754              if( zgItemTable[i].id == id )
    755              {
    756                if ( zgItemTable[i].len == len )
    757                {
    758                  osal_memcpy( zgItemTable[i].buf, buf, len );
    759                }
    760                break;
    761              }
    762              // Move on to the next item
    763              i++;
   \                     ??zgSetItem_1:
   \   00000A   05..         INC       ?V0
   \                     ??zgSetItem_0:
   \   00000C   E5..         MOV       A,?V0
   \   00000E   75F006       MOV       B,#0x6
   \   000011   A4           MUL       AB
   \   000012   F8           MOV       R0,A
   \   000013   A9F0         MOV       R1,B
   \   000015   74..         MOV       A,#zgItemTable & 0xff
   \   000017   28           ADD       A,R0
   \   000018   F8           MOV       R0,A
   \   000019   74..         MOV       A,#(zgItemTable >> 8) & 0xff
   \   00001B   39           ADDC      A,R1
   \   00001C   F9           MOV       R1,A
   \   00001D   E8           MOV       A,R0
   \   00001E   FE           MOV       R6,A
   \   00001F   E9           MOV       A,R1
   \   000020   FF           MOV       R7,A
   \   000021   8882         MOV       DPL,R0
   \   000023   F583         MOV       DPH,A
   \   000025   E4           CLR       A
   \   000026   93           MOVC      A,@A+DPTR
   \   000027   C0E0         PUSH      A
   \   000029   7401         MOV       A,#0x1
   \   00002B   93           MOVC      A,@A+DPTR
   \   00002C   F583         MOV       DPH,A
   \   00002E   D082         POP       DPL
   \   000030   A882         MOV       R0,DPL
   \   000032   A983         MOV       R1,DPH
   \   000034   E8           MOV       A,R0
   \   000035   49           ORL       A,R1
   \   000036   6048         JZ        ??zgSetItem_2
   \   000038   EA           MOV       A,R2
   \   000039   68           XRL       A,R0
   \   00003A   7002         JNZ       ??zgSetItem_3
   \   00003C   EB           MOV       A,R3
   \   00003D   69           XRL       A,R1
   \                     ??zgSetItem_3:
   \   00003E   70CA         JNZ       ??zgSetItem_1
   \   000040   8E82         MOV       DPL,R6
   \   000042   8F83         MOV       DPH,R7
   \   000044   A3           INC       DPTR
   \   000045   A3           INC       DPTR
   \   000046   E4           CLR       A
   \   000047   93           MOVC      A,@A+DPTR
   \   000048   F8           MOV       R0,A
   \   000049   7401         MOV       A,#0x1
   \   00004B   93           MOVC      A,@A+DPTR
   \   00004C   F9           MOV       R1,A
   \   00004D   EC           MOV       A,R4
   \   00004E   68           XRL       A,R0
   \   00004F   7002         JNZ       ??zgSetItem_4
   \   000051   ED           MOV       A,R5
   \   000052   69           XRL       A,R1
   \                     ??zgSetItem_4:
   \   000053   702B         JNZ       ??zgSetItem_2
   \   000055                ; Setup parameters for call to function osal_memcpy
   \   000055   740B         MOV       A,#0xb
   \   000057   12....       LCALL     ?XSTACK_DISP0_8
   \   00005A   E0           MOVX      A,@DPTR
   \   00005B   F5..         MOV       ?V0,A
   \   00005D   A3           INC       DPTR
   \   00005E   E0           MOVX      A,@DPTR
   \   00005F   F5..         MOV       ?V1,A
   \   000061   75..00       MOV       ?V2,#0x0
   \   000064   78..         MOV       R0,#?V0
   \   000066   12....       LCALL     ?PUSH_XSTACK_I_THREE
   \   000069   8E82         MOV       DPL,R6
   \   00006B   8F83         MOV       DPH,R7
   \   00006D   A3           INC       DPTR
   \   00006E   A3           INC       DPTR
   \   00006F   A3           INC       DPTR
   \   000070   A3           INC       DPTR
   \   000071   E4           CLR       A
   \   000072   93           MOVC      A,@A+DPTR
   \   000073   FA           MOV       R2,A
   \   000074   7401         MOV       A,#0x1
   \   000076   93           MOVC      A,@A+DPTR
   \   000077   FB           MOV       R3,A
   \   000078   12....       LCALL     `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   00007B   7403         MOV       A,#0x3
   \   00007D   12....       LCALL     ?DEALLOC_XSTACK8
    764            }
    765          }
   \                     ??zgSetItem_2:
   \   000080   7F03         MOV       R7,#0x3
   \   000082   02....       LJMP      ?BANKED_LEAVE_XDATA

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgPollRate>`:
   \   000000   E8030000     DD 1000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgQueuedPollRate>`:
   \   000000   6400         DW 100

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgResponsePollRate>`:
   \   000000   6400         DW 100

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgRejoinPollRate>`:
   \   000000   B801         DW 440

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgDefaultRejoinBackoff>`:
   \   000000   A0BB0D00     DD 900000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgDefaultRejoinScan>`:
   \   000000   A0BB0D00     DD 900000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgMaxDataRetries>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgMaxPollFailureRetries>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgDefaultChannelList>`:
   \   000000   00080000     DD 2048

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgDefaultStartingScanDuratio`:
   \   000000   05           DB 5

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgStackProfile>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgIndirectMsgTimeout>`:
   \   000000   07           DB 7

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgSecurityMode>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgSecurePermitJoin>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgRouteDiscoveryTime>`:
   \   000000   05           DB 5

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgRouteExpiryTime>`:
   \   000000   1E           DB 30

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgMaxBcastRetires>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgPassiveAckTimeout>`:
   \   000000   05           DB 5

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgBcastDeliveryTime>`:
   \   000000   1E           DB 30

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkMode>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgConcentratorRadius>`:
   \   000000   0A           DB 10

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkSrcRtgExpiryTime>`:
   \   000000   0A           DB 10

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkLeaveRequestAllowed>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkParentInformation>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkEndDeviceTimeoutDefault`:
   \   000000   08           DB 8

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgEndDeviceTimeoutValue>`:
   \   000000   08           DB 8

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApscMaxFrameRetries>`:
   \   000000   03           DB 3

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApscAckWaitDurationPolled>`:
   \   000000   B80B         DW 3000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApsAckWaitMultiplier>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApsDefaultMaxBindingTime>`:
   \   000000   803E         DW 16000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApsUseInsecureJoin>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApsNonMemberRadius>`:
   \   000000   02           DB 2

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkCommissionedNwkAddr>`:
   \   000000   FEFF         DW 65534

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApscDupRejTimeoutInc>`:
   \   000000   E803         DW 1000

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApscDupRejTimeoutCount>`:
   \   000000   0A           DB 10

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApsMinDupRejTableSize>`:
   \   000000   0500         DW 5

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgApsLinkKeyType>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgConfigPANID>`:
   \   000000   FFFF         DW 65535

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgStartDelay>`:
   \   000000   0A           DB 10

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkMgrMinTransmissions>`:
   \   000000   14           DB 20

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgNwkMgrMode>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zgSapiEndpoint>`:
   \   000000   E0           DB 224
    766          
    767          #ifndef NONWK
    768          /*********************************************************************
    769           * @fn       zgPreconfigKeyInit()
    770           *
    771           * @brief
    772           *
    773           *   Initialize ZCD_NV_PRECFGKEY NV item. If the item doesn't exist in NV memory,
    774           *   write the system default (value passed in) into NV memory. But if
    775           *   it exists do not overwrite it.
    776           *
    777           *   Also, if setDefault is TRUE and the item exists, we will write
    778           *   the default value to NV space.
    779           *
    780           * @param   setDefault - TRUE to set default
    781           *
    782           * @return  ZSUCCESS if successful, NV_ITEM_UNINIT if item did not
    783           *          exist in NV, NV_OPER_FAILED if failure.
    784           */
    785          static uint8 zgPreconfigKeyInit( uint8 setDefault )
    786          {
    787            uint8 zgPreConfigKey[SEC_KEY_LEN];
    788            uint8 status;
    789          
    790            // Initialize the Pre-Configured Key to the default key
    791            osal_memcpy( zgPreConfigKey, defaultKey, SEC_KEY_LEN );
    792          
    793            // If the item doesn't exist in NV memory, create and initialize it
    794            status = osal_nv_item_init( ZCD_NV_PRECFGKEY, SEC_KEY_LEN, zgPreConfigKey );
    795            if ( status == ZSUCCESS )
    796            {
    797              if ( setDefault )
    798              {
    799                // Write the default value back to NV
    800                status =  osal_nv_write( ZCD_NV_PRECFGKEY, 0, SEC_KEY_LEN, zgPreConfigKey );
    801              }
    802            }
    803          
    804            // clear local copy of default key
    805            osal_memset(zgPreConfigKey, 0x00, SEC_KEY_LEN);
    806          
    807            return (status);
    808          }
    809          #endif
    810          
    811          /*********************************************************************
    812           * @fn       zgUpgradeNVItems()
    813           *
    814           * @brief
    815           *
    816           *   Function that upgrades NV Items that have changed.
    817           *
    818           * @param   none
    819           *
    820           * @return  none
    821           */
    822          static void zgUpgradeNVItems( void )
    823          {
    824          #if defined ( ZCD_NV_POLL_RATE_OLD16 )
    825            {
    826              // This conversion will only happen if the old poll rate exists and
    827              // the new poll rate doesn't exist.  It will read the old poll rate,
    828              // convert it to the new poll rate, create the new poll rate NV item,
    829              // then delete the old poll rate NV item.
    830              uint16 oldNvLen;
    831              uint16 newNvLen;
    832          
    833              // Use the length of the NV items to determine if they exist
    834              oldNvLen = osal_nv_item_len( ZCD_NV_POLL_RATE_OLD16 );
    835              newNvLen = osal_nv_item_len( ZCD_NV_POLL_RATE );
    836              if ( (newNvLen == 0) && (oldNvLen == sizeof ( uint16 )) )
    837              {
    838                // The old poll rate exists, so read it and convert to the new 32 bit poll rate
    839                uint16 oldPollRate;
    840                osal_nv_read( ZCD_NV_POLL_RATE_OLD16, 0, sizeof(uint16), &oldPollRate );
    841                zgPollRate = (uint32)oldPollRate;
    842                osal_nv_item_init( ZCD_NV_POLL_RATE, sizeof(zgPollRate), &zgPollRate );
    843                osal_nv_delete( ZCD_NV_POLL_RATE_OLD16, oldNvLen );
    844              }
    845            }
    846          #endif // ZCD_NV_POLL_RATE_OLD16
    847          }
    848          
    849          /*********************************************************************
    850          *********************************************************************/

   Maximum stack usage in bytes:

   XSTACK Function
   ------ --------
     34   zgInit
       30   -> ZDSecMgrInitNVKeyTables
       30   -> ZMacGetReq
       33   -> osal_memcpy
       30   -> osal_memset
       30   -> osal_nv_delete
       32   -> osal_nv_item_init
       30   -> osal_nv_item_len
       34   -> osal_nv_read
       34   -> osal_nv_write
       30   -> zgInitItems
       30   -> zgReadStartupOptions
       30   -> zgWriteStartupOptions
     48   zgInitItems
       16   -> osal_nv_item_init
       18   -> osal_nv_read
       18   -> osal_nv_write
     45   zgReadStartupOptions
       13   -> osal_nv_item_init
       15   -> osal_nv_read
     16   zgSetItem
       14   -> osal_memcpy
     45   zgWriteStartupOptions
       15   -> osal_nv_read
       15   -> osal_nv_write


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       1  ?<Initializer for zgApsAckWaitMultiplier>
       2  ?<Initializer for zgApsDefaultMaxBindingTime>
       1  ?<Initializer for zgApsLinkKeyType>
       2  ?<Initializer for zgApsMinDupRejTableSize>
       1  ?<Initializer for zgApsNonMemberRadius>
       1  ?<Initializer for zgApsUseInsecureJoin>
       2  ?<Initializer for zgApscAckWaitDurationPolled>
       1  ?<Initializer for zgApscDupRejTimeoutCount>
       2  ?<Initializer for zgApscDupRejTimeoutInc>
       1  ?<Initializer for zgApscMaxFrameRetries>
       1  ?<Initializer for zgBcastDeliveryTime>
       1  ?<Initializer for zgConcentratorRadius>
       2  ?<Initializer for zgConfigPANID>
       4  ?<Initializer for zgDefaultChannelList>
       4  ?<Initializer for zgDefaultRejoinBackoff>
       4  ?<Initializer for zgDefaultRejoinScan>
       1  ?<Initializer for zgDefaultStartingScanDuratio
       1  ?<Initializer for zgEndDeviceTimeoutValue>
       1  ?<Initializer for zgIndirectMsgTimeout>
       1  ?<Initializer for zgMaxBcastRetires>
       1  ?<Initializer for zgMaxDataRetries>
       1  ?<Initializer for zgMaxPollFailureRetries>
       2  ?<Initializer for zgNwkCommissionedNwkAddr>
       1  ?<Initializer for zgNwkEndDeviceTimeoutDefault
       1  ?<Initializer for zgNwkLeaveRequestAllowed>
       1  ?<Initializer for zgNwkMgrMinTransmissions>
       1  ?<Initializer for zgNwkMgrMode>
       1  ?<Initializer for zgNwkMode>
       1  ?<Initializer for zgNwkParentInformation>
       1  ?<Initializer for zgNwkSrcRtgExpiryTime>
       1  ?<Initializer for zgPassiveAckTimeout>
       4  ?<Initializer for zgPollRate>
       2  ?<Initializer for zgQueuedPollRate>
       2  ?<Initializer for zgRejoinPollRate>
       2  ?<Initializer for zgResponsePollRate>
       1  ?<Initializer for zgRouteDiscoveryTime>
       1  ?<Initializer for zgRouteExpiryTime>
       1  ?<Initializer for zgSapiEndpoint>
       1  ?<Initializer for zgSecurePermitJoin>
       1  ?<Initializer for zgSecurityMode>
       1  ?<Initializer for zgStackProfile>
       1  ?<Initializer for zgStartDelay>
       6  ??Subroutine4_0
       8  ??Subroutine5_0
      12  ??Subroutine6_0
      10  ?Subroutine0
       7  ?Subroutine1
       2  ?Subroutine2
       6  ?Subroutine3
       1  zgApsAckWaitMultiplier
       1  zgApsAllowR19Sec
       2  zgApsDefaultMaxBindingTime
       1  zgApsLinkKeyType
       2  zgApsMinDupRejTableSize
       1  zgApsNonMemberRadius
       8  zgApsTrustCenterAddr
       8  zgApsUseExtendedPANID
       1  zgApsUseInsecureJoin
       2  zgApscAckWaitDurationPolled
       1  zgApscDupRejTimeoutCount
       2  zgApscDupRejTimeoutInc
       1  zgApscMaxFrameRetries
       1  zgBcastDeliveryTime
       1  zgChildAgingEnable
       1  zgConcentratorDiscoveryTime
       1  zgConcentratorEnable
       1  zgConcentratorRC
       1  zgConcentratorRadius
       2  zgConfigPANID
       4  zgDefaultChannelList
       4  zgDefaultRejoinBackoff
       4  zgDefaultRejoinScan
       1  zgDefaultStartingScanDuration
       1  zgDeviceLogicalType
       1  zgEndDeviceConfiguration
       4  zgEndDeviceKAInterval
       1  zgEndDeviceTimeoutValue
       8  zgExtendedPANID
       1  zgIndirectMsgTimeout
     416  zgInit
     198  zgInitItems
       6  zgItemTable
       1  zgMaxBcastRetires
       1  zgMaxDataRetries
       1  zgMaxPollFailureRetries
       2  zgNwkCommissionedNwkAddr
       1  zgNwkEndDeviceTimeoutDefault
       1  zgNwkLeaveRequestAllowed
       1  zgNwkMgrMinTransmissions
       1  zgNwkMgrMode
       1  zgNwkMode
       1  zgNwkParentInformation
       1  zgNwkSrcRtgExpiryTime
       1  zgPassiveAckTimeout
       4  zgPollRate
       1  zgPreConfigKeys
       2  zgQueuedPollRate
      61  zgReadStartupOptions
       2  zgRejoinPollRate
       2  zgResponsePollRate
       1  zgRouteDiscoveryTime
       1  zgRouteExpiryTime
       1  zgRouterOffAssocCleanup
       1  zgSapiEndpoint
       1  zgSecurePermitJoin
       1  zgSecurityMode
     133  zgSetItem
       1  zgStackProfile
       1  zgStartDelay
       1  zgUseDefaultTCLK
     106  zgWriteStartupOptions
       1  zgZdoDirectCB
      30  -- Other

 
 965 bytes in segment BANKED_CODE
  30 bytes in segment BANK_RELAYS
   6 bytes in segment CODE_C
  63 bytes in segment XDATA_I
  63 bytes in segment XDATA_ID
  39 bytes in segment XDATA_Z
 
  99 bytes of CODE     memory
 965 bytes of HUGECODE memory
 102 bytes of XDATA    memory

Errors: none
Warnings: none
